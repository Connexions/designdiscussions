<html>  <head>    <meta content="text/html;charset=UTF-8" http-equiv="Content-Type">    <title>Connexions Rewrite Design Notes</title>    <style type="text/css">ol{margin:0;padding:0}.c5{max-width:468pt;background-color:#ffffff;padding:72pt 72pt 72pt 72pt}.c6{color:#1155cc;font-size:10pt;text-decoration:underline}.c9{color:inherit;text-decoration:inherit}.c2{text-indent:36pt;margin-left:108pt}.c1{height:11pt}.c4{font-weight:bold}.c0{direction:ltr}.c3{text-indent:36pt}.c8{font-size:14pt}.c7{text-decoration:underline}.title{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:36pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}.subtitle{padding-top:18pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:24pt;font-family:"Georgia";padding-bottom:4pt}li{color:#000000;font-size:11pt;font-family:"Arial"}p{color:#000000;font-size:11pt;margin:0;font-family:"Arial"}h1{padding-top:24pt;line-height:1.15;text-align:left;color:#000000;font-size:18pt;font-family:"Arial";font-weight:bold;padding-bottom:6pt}h2{padding-top:18pt;line-height:1.15;text-align:left;color:#000000;font-size:14pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h3{padding-top:14pt;line-height:1.15;text-align:left;color:#666666;font-size:12pt;font-family:"Arial";font-weight:bold;padding-bottom:4pt}h4{padding-top:12pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:11pt;font-family:"Arial";padding-bottom:2pt}h5{padding-top:11pt;line-height:1.15;text-align:left;color:#666666;font-size:10pt;font-family:"Arial";font-weight:bold;padding-bottom:2pt}h6{padding-top:10pt;line-height:1.15;text-align:left;color:#666666;font-style:italic;font-size:10pt;font-family:"Arial";padding-bottom:2pt}</style>  </head>  <body class="c5">    <p class="c0"><img src="images/cnx_logo.png" height="73" width="73"><span class="c4 c8 c7">Connexions Rewrite Design Meeting Notes</p>
    <p class="c1 c0"><span class="c4"></span></p>
    <p class="c0"><span class="c4 c8 c7">June 12, 2012</span></p>
    <p class="c1 c0"><span class="c4"></span></p>
    <p class="c0"><span class="c4">Web View</span></p>
    <p class="c0"><span>Have been planning to use Pyramid, which comes with TAL. Marvin thinks Django might be a better way to go -- more support, google app engine. Big sites running Django -- https://docs.djangoproject.com/en/dev/topics/templates/ big websites run by Django: http://stackoverflow.com/a/1907034/756056</span></p>
    <p class="c1 c0"><span class="c4"></span></p>
    <p class="c0"><span class="c4">What is in the webview?</span></p>
    <p class="c0"><span>
      <ul>
        <li>Go to a random collection to see what is there. - http://cnx.org/content/randomContent?portal_type=Collection</li>
        <li>Metadata, content, table of contents, actions (reuse, download etc.), lenses, lens branding, related material (out of date), social networking, order printing, links to the versions, reuse and attribution page, search features, header/branding</li>
        <li>Layout needs to be simplified for the average reader -- too complex. Want to have all the functionality, but somehow layered in a way that is much easier for basic users to use.</li>
        <li>Also note that people use the content in different ways</li>
        <ul>
          <li>Reading a single module on a single topic found through web search</li>
          <li>Reading a whole textbook online, in pdf or epub for a class you are taking or teaching</li>
          <li>Using a homework system that directs you to individual modules as it determines prerequisites you might need.</li>
        </ul>
      </ul
    </span></p>
    <p class="c0"><span>Might want to consider architecting the webview so that it can eventually be coordinated better with the epub and pdf versions -- same numbering and similar styling. Teachers and learners always ask for this and struggle with how different they are. Phil provided some notes about such which is included at the bottom of the post.</span></p>
    <p class="c1 c0"><span class="c4"></span></p>
    <p class="c0"><span class="c4">Web templates and policies:</span></p>
    <p class="c0"><span>Want to come up with a set of policies and review processes for the web templates do we want:</span></p>
    <p class="c0"><span>
      <ul>
        <li>No business logic in the templates. Just display logic. The logic should be in methods on the objects.</li>
        <li>May want to control the libraries that are used so that it doesn’t end up with a</li>
        <li>Enforce with code reviews. Maybe some lint-like tool for some rules that can help expedite the code review.</li>
        <li>Can have a checklist that can be used by programmers and by reviewers.</li>
        <li>Phil - Would it be useful to have the same templating language server and client side? Ross: TAL has javascript client and server side.</li>
      </ul>
    </span></p>
    <p class="c1 c0"><span class="c4"></span></p>
    <p class="c0"><span class="c4">Phil’s notes about making the formats more congruent: Same CSS for Different Formats</span></p>
    <p class="c0"><span>When collection context is known we could inject "counter-reset: chapter 3, section 2, exercise 12, custom-exercise: 45" so numbering is correct.</span></p>
    <p class="c0"><span>https://github.com/philschatz/oer.epubcss allows CSS "features" to be "baked into" formats that don't normally support them. For example: epub1 doesn't support counters (for numbering sections/exercises), Some browsers don't support collating elements (move-to).</span></p>
    <p class="c0"><span>The CNXML to HTML doc has some notes in it: https://docs.google.com/document/d/1E2RGJf0kHdgWOd2590VGmv9YixgmDFo-gX3xlbLGgM0/edit?pli=1</span></p>
    <p class="c1 c0"><span class="c4"></span></p>
    <p class="c0"><span class="c4">Some editing/authoring stuff that came up in the conversation</span></p>
    <p class="c0"><span>
      <ul>
        <li>When editing modules -- make sure they are easy to break apart into a series of modules.</li>
        <li>Make it possible to add search results to a collection. This idea came up twice! (CNX currently lets you add search results to a work area if you are logged in.) </li>
      </ul>
    </span></p>
    
    <p class="c1 c0"><span class="c4"></span></p>    <p class="c0"><span class="c4 c8 c7">June 11, 2012</span></p>
    <p class="c1 c0"><span class="c4"></span></p>
    <p class="c0"><span class="c4">User Security (from Article)</span></p>
    <p class="c0"><span>-Open ID people</span></p>
    <p class="c0"><span>-force a password change on users</span></p>
    <p class="c0"><span>- currently, passwords stored in Plone in hash. </span></p>
    <p class="c0"><span>- old users will have option of keeping or changing password. Encouraged to change. </span></p>
    <p class="c0"><span>- knowing that encrypted with Sscrypt is not a problem.</span></p>
    <p class="c0"><span>-Use countdown. &ldquo;Change password in the next X days&rdquo;.</span></p>
    <p class="c0"><span>-eternal nag - encouraged to change password every time one logs in. </span></p>
    <p class="c0"><span>-Users:</span></p>
    <p class="c0"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1. use existing Plone hash (after examination)</span></p>
    <p class="c0"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2. Run through scrypt with 128 bit salt</span></p>
    <p class="c0"><span>-all passwords handled through the same path, just with different origins</span></p>
    <p class="c0"><span>-use same code whether accessing through Plone or open ID user. </span></p>
    <p class="c0"><span>-same module from same code base; different paths</span></p>
    <p class="c0"><span>-1 code base on 1 server because on Open ID.</span></p>
    <p class="c0"><span>- Extra amount of time, with some users using hash 1 and some using hash 2. </span></p>
    <p class="c0"><span>-If not all users change passwords, there will be a small delay. &nbsp;</span></p>
    <p class="c0"><span>-Slow transition from scrypt/hash to scrypt/plaintext. </span></p>
    <p class="c1 c0"><span class="c4"></span></p>
    <p class="c0"><span class="c4">Incorrect Login</span></p>
    <p class="c0"><span>-currently, when password is incorrect, we return id and no password. We shouldn&rsquo;t return any information.</span></p>
    <p class="c0"><span>-If we open up as Open ID repository, we need to be as secure as possible. </span></p>
    <p class="c0"><span>-At Chase, url didn&rsquo;t contain code path. </span></p>
    <p class="c0"><span>-attacker would have url that exposes code path.</span></p>
    <p class="c0"><span>-need to verify origin of request. If session ID isn&rsquo;t in database, request dropped. Prevents Man in the Middle attack. </span></p>
    <p class="c0"><span>-Nothing is passed as unencrypted parameter. </span></p>
    <p class="c0"><span>-SSH and strongly encrypted, no hints if fail would be better than current setup. </span></p>
    <p class="c0"><span>-Blog: store salt per hash per user. </span></p>
    <p class="c0"><span>-Login Page:</span></p>
    <p class="c0"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1. use SSH</span></p>
    <p class="c0"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2. If a failure, do not expose correct ID. </span></p>
    <p class="c0"><span>-storing salt with the password=not wise. Will however, prevent rainbow attack.</span></p>
    <p class="c0"><span>-If password hashed with user = system salt stored with user salt. </span></p>
    <p class="c0"><span>-Must use strong algorithm. If one can attack database, can attack salt. </span></p>
    <p class="c0"><span>-Standard - keep salt next to hash.</span></p>
    <p class="c0"><span>-Storing salt next to hash prevents attack against all, but not against one individual. </span></p>
    <p class="c0"><span>-Security groups. </span></p>
    <p class="c0"><span>-Does not matter where salt is stored. Salt for every user = protected. </span></p>
    <p class="c0"><span>-Store a salt for each hash, but not in a separate location. </span></p>
    <p class="c1 c0"><span class="c4"></span></p>
    <p class="c0"><span class="c4">Web View</span></p>
    <p class="c0"><span>-need to discuss Pyramid/ TAL.</span></p>
    <p class="c0"><span>-allowed to write Python expressions.</span></p>
    <p class="c0"><span>-difference between Web View and everything else?</span></p>
    <p class="c0"><span>-want Web View to display only</span></p>
    <p class="c0"><span>-logic can be in any random template because of TAL. </span></p>
    <p class="c0"><span>-html stored (editable version) not the same as html rendered to the browser. </span></p>
    <p class="c0"><span>-need a strict policy regarding template allowances. </span></p>    <p class="c0"><span class="c4 c8 c7"><br>      </span></p>    <p class="c0"><span class="c4 c8 c7">June 7, 2012</span></p>    <p class="c1 c0"><span class="c4"></span></p>    <p class="c0"><span class="c4">Users</span></p>    <p class="c0"><span>-convert all user IDs to open IDs</span></p>    <p class="c0"><span>-user will be stored in the repository/OAuth server</span></p>    <p class="c0"><span>-structure of profile service : has open ID server and        OAuth server</span></p>    <p class="c0"><span>- does editor get permissions from profile service?        &nbsp;Editor repository does. </span></p>    <p class="c0"><span>-once server validates source, editor uses own        repository. </span></p>    <p class="c1 c0"><span></span></p>    <p class="c2 c0"><img src="images/image00.png" height="322" width="446"></p>    <p class="c0"><span>-storing a profile service for everyone with a login. </span></p>    <p class="c0"><span>-Users stored in...?</span></p>    <p class="c0"><span>-Ask Arjun about not storing users with public content.      </span></p>    <p class="c0"><span>-Domain component that may store users. </span></p>    <p class="c1 c0"><span></span></p>    <p class="c2 c1 c0"><span></span></p>    <p class="c0"><span class="c4">Article: Password Storage</span></p>    <p class="c0"><span>-</span><span class="c6"><a class="c9" href="http://throwingfire.com/storing-passwords-securely/">http://throwingfire.com/storing-passwords-securely/</a></span></p>    <p class="c0"><span>-Hacker News top 50 and top 100: super interesting.</span></p>    <p class="c0"><span>-Author suggests many ways to hash and store passwords.      </span></p>    <p class="c0"><span>-don’t do linkedin.</span></p>    <p class="c0"><span>-Read for Monday to discuss which Python package to use.      </span></p>    <p class="c1 c0"><span></span></p>    <p class="c0"><span class="c4">Editing Math</span></p>    <p class="c0"><span>-Rich wants to be able to handle LaTex directly in        editor. </span></p>    <p class="c0"><span>-Libraries can be used to convert LaTex to MathML.</span></p>    <p class="c0"><span>-In editor - LaTex can be used; for publishing, must use        MAthML.</span></p>    <p class="c0"><span>-don’t want to edit in MathML.</span></p>    <p class="c0"><span>-Should we attempt to keep math imported with LaTex? aka        preserve LaTex?</span></p>    <p class="c0"><span>-there exists MathML with text. Math mode in LaTex? Not        supported. </span></p>    <p class="c0"><span>-Gustov and American Institute of Math: have textbooks        in LaTex, convert to XML and HTML.</span></p>    <p class="c0"><span>-how to clean up in Math mode of LaTex? perhaps “grab        math mode?”</span></p>    <p class="c0"><span>-Trollix used for LaTex; Mathjax is for editor only. </span></p>    <p class="c0"><span>-Who knows LaTex? Bryan knew best. May need outside        users. involve community.</span></p>    <p class="c0"><span>-Need a list of projects that need assistance from        outside users in community. Use GitHub</span></p>    <p class="c0"><span>-Phil: much of content comes in from Word Importer,and        &nbsp;MathML is most common in repository. What do we use for editing        MathML? </span></p>    <p class="c0"><span>-Is it possible to convert from MathMl to LaTex?</span></p>    <p class="c0"><span>-What if we used MathML, but created annotations in        LaTex?</span></p>    <p class="c0"><span>-Need to be able to edit small portion instead of        viewing whole document.</span></p>    <p class="c0"><span>-System should support content math.</span></p>    <p class="c0"><span>-Support LaTEx = more potential support for content        math.</span></p>    <p class="c0"></p>    <p class="c0"><span class="c4 c8"><br>      </span></p>    <p class="c0"><span class="c4 c8">&nbsp;</span><span class="c4 c8 c7">June        6, 2012</span></p>    <p class="c1 c0"><span class="c4 c7"></span></p>    <p class="c0"><span class="c4">Intro </span></p>    <p class="c0"><span>- Kathy wants to use design and interface ideas for        editing and converter (API)</span></p>    <p class="c0"><span>-scheduling a call with TinyMCE to discuss how new        system works with core. Consider inviting someone from Peer to Peer. </span></p>    <p class="c0"><span>-Sprint is scheduled for the end of July in Berlin.</span></p>    <p class="c1 c0"><span></span></p>    <p class="c0"><span class="c4">Queue</span></p>    <p class="c0"><span>- problem: zip and pdf generation no longer separate;        takes too long to generate zip, which is then deleted, leading to pdf        failure. when LaTex is used, also fails. locks zip.</span></p>    <p class="c0"><span>-necessary improvements: </span></p>    <p class="c0 c3"><span>locks for complete zip</span></p>    <p class="c0 c3"><span>system integrated less tightly</span></p>    <p class="c0 c3"><span>testable dependencies before running, ask for        reenqueue</span></p>    <p class="c0 c3"><span>items published all at once, trigger events        simultaneously</span></p>    <p class="c0 c3"><span>ability to freeze in queue, remove from queue, move        to the end of queue</span></p>    <p class="c1 c0 c3"><span></span></p>    <p class="c0"><span class="c4">Complete Zip Changes</span></p>    <p class="c0"><span>- store in cache when generated</span></p>    <p class="c0"><span>-store files on file system instead of ZODB &nbsp;=        quicker access. </span></p>    <p class="c1 c0"><span></span></p>    <p class="c0"><span class="c4">PDF Changes</span></p>    <p class="c0"><span>- check if complete zip exists</span></p>    <p class="c0"><span>-if not, re enqueue itself</span></p>    <p class="c0"><span>-get complete zipform from cache</span></p>    <p class="c0"><span>-launch scripts (need API) instead of Zope.</span></p>    <p class="c0"><span>- possibly launch for a shorter time?</span></p>    <p class="c0"><span>-Json format will be the dictionary of dependencies. </span></p>    <p class="c1 c0"><span></span></p>    <p class="c0"><span class="c4">Queue Changes</span></p>    <p class="c0"><span>-improve transactional behavior</span></p>    <p class="c0"><span>-add button to remove something from processing queue</span></p>    <p class="c1 c0"><span></span></p>    <p class="c0"><span class="c4">Physics Issues</span></p>    <p class="c0"><span>-cannot fix wrapping issue without break</span></p>    <p class="c0"><span>-”=” stretchy over bar sign. Phil’s code change is to        detect when trying to replace carat.</span></p>    <p class="c1 c0"><span></span></p>    <p class="c0"><span class="c4">Sociology Issues</span></p>    <p class="c0"><span>-Table of Contents: “...0” should be removed. (Phil.)</span></p>    <p class="c0"><span>-Index: 1st page won’t start until 2nd column because of        dif tags(sp).</span></p>    <p class="c0"><span>-Phil made index span top of page = issue resolved. </span></p>    <br>    <p class="c1 c0"><span></span></p>    <p class="c1 c0"><span></span></p>    <p class="c1 c0"><span></span></p>    <p class="c1 c0"><span></span></p>    <p class="c2 c1 c0"><span></span></p>    <p class="c0 c2"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p>    <p class="c1 c0"><span></span></p>    <p class="c0 c1"><span></span></p>    <p class="c1 c0"><span></span></p>    <p class="c1 c0"><span class="c4"></span></p>    <p class="c0"><span>&nbsp;</span></p>    <p class="c1 c0"><span></span></p>    <p class="c1 c0"><span class="c4 c7"></span></p>    <p class="c1 c0"><span class="c4 c7"></span></p>    <p class="c1 c0"><span></span></p>    <p class="c1 c0"><span></span></p>    <p class="c1 c0"><span></span></p>  </body></html>